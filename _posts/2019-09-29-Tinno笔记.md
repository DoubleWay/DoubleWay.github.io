---
layout:     post                    
title:      TINNO笔记                
subtitle:   Hello 
date:       2019-09-29              
author:     DoubleWay                      
header-img: img/post-bg-2015.jpg    #这篇文章标题背景图片
catalog: true                       
tags:                               
    - TINNO
    
---
### 安装JDK用命令装

------------

1. 添加openjdk8的第三方源
sudo add-apt-repository ppa:openjdk-r/ppa
2. 执行更新
apt-get update
3. 安装openjdk8
sudo apt-get install openjdk-8-jdk
4. 选择版本
sudo update-alternatives –config Java
5. 确认安装成功
java -version
openjdk version "1.8.0_91"


### 配置文件

------------

- gedit ~/.bashrc
- 将repo文件放到/usr/bin/ 下面，最好加一下权限，sudo chmod 777 /usr/bin/repo，从拷贝的位置执行命令sudo cp -r repo /usr/bin/
- 使用which repo，可以看repo是否已加载到环境变量中，ls -la |grep /usr/bin/repo,可以查看repo的权限
- git安装：sudo apt-get install git-core gitk git-man openssh-server openssh-client vim
- config 放到/home/android/.ssh/ 下面 改一下用户名，改成自己的 identituFile ~/.ssh/id_rsa
host gerrit9
user can.wang ---->wiewei.zhang
port 29418
hostname 192.168.33.9
identityFile ~/.ssh/id_rsa
- 在config里加上这些配置
host scm19
user git
hostname 172.16.20.19
identityFile ~/.ssh/id_rsa
- 配置编译环境
  1. 替换源,把我给的sources.list放到/etc/apt/下
smb://172.16.21.203/downloads/编译环境
  2. sudo apt-get update; sudo apt-get upgrade
  3. sudo apt-get install gcc-multilib g++ g++-4.8-multilib dpkg-dev gnupg flex bison gperf build-essential zip curl libc6-dev libncurses5-dev:i386 x11proto-core-dev libx11-dev:i386 libreadline6-dev:i386 libgl1-mesa-glx:i386 libgl1-mesa-dev g++-multilib mingw32  tofrodos python-markdown libxml2-utils xsltproc zlib1g-dev:i386  (有可能需要连接外网)

### 找 patch列表

------------

Android7.0 打patch 步骤
1. 进入项目根目录

 	cd .repo/manifests 目录下 打开终端
2. 查看所有分支，找到复制patch分支

	 git branch -a
3. 获取所有分支xml文件，复制到工具目录下的patch目录

	git checkout xxxx/xxx/patch
4. 在manifests目录下切换分支到default分支,在项目目录下同步（repo sync）

	git checkout default
5. 执行工具目录下的脚本，获取要打patch的列表

	./start.sh
6. 进入相应的仓库，查看需要开始打patch的版本

	git branch -a  找到patch分支

	gitk  xxxx/xxx/patch
	
### 查看全局的状态

------------

repo status查看全局的状态 相当于git status 的全局
repo forall -p -c git status . 也是全局搜索
repo forall -p -c git push tinno HEAD:V3740AN_7.0_MEC_MX_V1.1全局提交 提交整个项目

### 合并原型的步骤

------------
1. 提交
repo status (将本地修改全部提交)
2. 更新
repo sync
3. 合并
 - 按tag合并
git tag -l *3953*
git show xxx (tag名)
repo forall -p -c git merge xxx (tag名) > ./xxx.xml
 - 按分支合并
git branch -a
repo forall -p -c git merge remotes/tinno/V3911AN_7.0_V1.1 (分支名) > ./xxx.xml
4. 冲突
一个一个解决冲突,然后打tag 提交或者直接提交
5. 打tag 
repo forall -p -c git tag -f xxx
备注:直接提交的这步省略
6. 提交
repo forall -p -c git push tinno xxx
也可以根据第三步生成的文件查看有关更新路径,进入每个仓库进行提交
- 一种强推的方式
git checkout P4601AN_6.0_CLF_PH_V2.1
git add
git commit
git tag -f P4601AN_6.0_CLF_PH_V2.1
git push tinno P4601AN_6.0_CLF_PH_V2.1 -f

### flash tools 无法刷机

------------

如果flash tools 无法刷机的话，把modemmanager卸载了
sudo apt-get remove modemanager

### 本地OTA制作步骤

------------
